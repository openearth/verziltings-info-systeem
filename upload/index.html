<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>Verzilting doucment upload</title>

    <script
        src="https://code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous">
    </script>
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.2/mapbox-gl.js'></script>
    <script>
        function callback(data)
        {
            console.log(data)
        }

        $(document).ready( function() {
            $('#document_upload').submit(function(evt) {
                evt.preventDefault();

                var formContent = new FormData($(this)[0]);
                var formAction = $(this).attr('action');
                var formSubmitType = $(this).attr('method');

                $.ajax({
                    data: formContent,
                    url: formAction,
                    type: formSubmitType,
                    success: callback,
                    cache: false,
                    contentType: false,
                    processData: false
                });

                return false; // prevent form from submitting
            });
        });
    </script>


    <link href="form.css" rel="stylesheet"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel='stylesheet' href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.2/mapbox-gl.css'/>

</head>
<body>
    <div style="display:none">
         <fieldset id="page_template" name="page">
            <legend></legend>
             <label>Title(optional):</label><input type="text" name="title"><br>
             <label>Story:</label><textarea maxlength="256" placeholder="This is my story" rows="4" cols="50"></textarea><br>
             <label>Data:</label><input type="file" name="data"><br>
             <label>Location(optional):</label><input type="text" name="location"><br>
             <label>URL(optional):</label><input type="text" name="URL"><br>
        </fieldset>
    </div>

    <form id="document_upload" action="../php/verzilting.php" method="post">

    <fieldset id="document">
        <h2>Upload uw document</h2>
        <label for="creator">Uw naam</label>
        <input type="text" name="creator">
        <label for="title">Document titel</label>
        <input type="text" name="title">
        <label for="project">In kader van welk project?</label>
        <input type="text" name="project">
        <label for="author">Auteur</label>
        <input type="text" name="author">
        <label for="waterbody">Waterlichaam connectie</label>
        <div id="select-waterbody-map">
          <script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v2.2.0/mapbox-gl-geocoder.min.js'></script>
          <link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v2.2.0/mapbox-gl-geocoder.css' type='text/css' />
          <script src='select-waterbody-map.js'></script>
        </div>
        <input hidden name="waterbody">
        <label for="document">Upload document</label>
        <input type="file" name="document">
        <input hidden value="true" name="submit"/>
    </fieldset>
         <button type="submit">Upload</button>
    </form>
</body>
</html>
